Description: build openh264 with -DX86_32_PICASM on x86
 To fix linker errors with new binutils, see #965328.
Author: Dmitry Shachnev <mitya57@debian.org>
Forwarded: not-yet
Last-Update: 2020-07-20

--- a/src/3rdparty/chromium/third_party/openh264/BUILD.gn
+++ b/src/3rdparty/chromium/third_party/openh264/BUILD.gn
@@ -67,7 +67,7 @@ if (use_assembler) {
     sources = openh264_common_sources_asm_x86
     defines = yasm_defines
     if (target_cpu == "x86") {
-      defines += [ "X86_32" ]
+      defines += [ "X86_32", "X86_32_PICASM" ]
     } else {  # x64
       if (is_mac) {
         defines += [
@@ -88,7 +88,7 @@ if (use_assembler) {
     sources = openh264_processing_sources_asm_x86
     defines = yasm_defines
     if (target_cpu == "x86") {
-      defines += [ "X86_32" ]
+      defines += [ "X86_32", "X86_32_PICASM" ]
     } else {  # x64
       if (is_mac) {
         defines += [
@@ -109,7 +109,7 @@ if (use_assembler) {
     sources = openh264_encoder_sources_asm_x86
     defines = yasm_defines
     if (target_cpu == "x86") {
-      defines += [ "X86_32" ]
+      defines += [ "X86_32", "X86_32_PICASM" ]
     } else {  # x64
       if (is_mac) {
         defines += [
